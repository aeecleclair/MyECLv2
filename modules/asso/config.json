{
    "authorisation" : "#ecl",
    "description" : "Module d'asso",
    "heads" : {
		"styles" : [
			"static/asso.css"
		],
		"scripts" : [
			"static/asso.js"		
		]
	},
	"database" : [
        {
            "table" : "asso", 
            "schema" : {
                "id" : "INT PRIMARY KEY",
				"nom" : "VARCHAR(255)",
				"photo" : "TEXT",
				"group_id" : "INT",
				"galerie" : "INT",
                "description" : "TEXT",
                "facebook" : "TEXT",
                "mail" : "TEXT"
            }
        },
		{
			"table" : "asso_photos",
			"schema" : {
				"id" : "INT",
                "galerie_id" : "INT",
				"path" : "TEXT",
				"url" : "TEXT",
				"selected" : "VARCHAR(1)"
			}
		}
    ],
    "rules" : [
        {
            "route" : "/modules/asso/static/*",
            "static" : "static/"
        },
        {
            "body" : "main/:id",
            "static" : "body/asso.html"
        },
        {
            "dyn_authorisation" : "authorise_edit",
            "body" : "edit_asso/:id",
            "static" : "body/edit_asso.html"
        },
        {
            "dyn_authorisation" : "authorise_edit",
            "route" : "/module/asso/edit/:id",
            "callback" : "edit",
            "method" : "POST",
            "enctype" : "multipart",
            "multer_method" : {
                "name" : "fields",
                "fields" : [
                    { "name" : "main", "maxCount" : 1 },
                    { "name" : "gallery"}
                ]
            }
        },
		{
			"route" : "/module/asso/data/:id",
			"callback" : "get_data"
		}
    ],
    "menu" : [
        {
            "name" : "Annuaire associatif",
            "body" : "main"
        }
    ]
}
