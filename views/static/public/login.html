<!DOCTYPE html>

<html>

<head>
	
	<title>MyECL</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS non custom : Bootstrap et Kingadmin-->

	<link href="/kingadmin/theme/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="/kingadmin/theme/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="/kingadmin/theme/assets/css/main.css" rel="stylesheet" type="text/css">

	<!-- CSS custom -->

	<link href="/styles_perso.css" rel="stylesheet" type="text/css">

	<link href="/login.css" rel="stylesheet" type="text/css">

</head>

<body>

    <div id="info-message"></div>
	<div class="container">

		<div class="row">

			<div id="connexion" class="col-xs-4 col-xs-offset-4">

				<div id="connexion-header">

					MyECL

				</div>

				<div id="password_box">

                    <form class="form-horizontal" role="form" enctype="application/x-www-form-urlencoded" method="POST" action="/login">

						<div id="login-input" class="form-group">
							<label for="login" class="control-label sr-only">Login</label>
							<div class="col-sm-12">
								<div class="input-group">
									<input type="text" id="login" name="login" placeholder="Login" class="form-control">
									<span class="input-group-addon"><i class="fa fa-user"></i></span>
								</div>
							</div>
						</div>

						<div id="password-input" class="form-group">
							<label for="password" class="control-label sr-only">Mot de passe</label>
							<div class="col-sm-12">
								<div class="input-group">
									<input type="password" id="password" name="password" placeholder="Mot de passe" class="form-control">
									<span class="input-group-addon"><i class="fa fa-lock"></i></span>
								</div>
							</div>
							<div id="error-message" class="col-sm-12"></div>
						</div>

						<div class="form-group">
							<div class="col-sm-12">
								<label class="fancy-checkbox">
									<input type="checkbox">
									<span>Se souvenir de moi</span>
								</label>
							</div>
						</div>
						<div class="form-group">
							<div class="col-sm-12">
								<button type="submit" class="btn btn-default center-block">Se connecter</button>
							</div>
						</div>
					</form>

					<legend>Première connexion ?</legend>

					<a href="/logcas"><button class="btn btn-default center-block" id="inscription">Elève de l'ECL</button></a>
    			
    				Plus à l'école ? Envoyez nous un mail pour confirmer votre statut de centralien à l'adresse <a mailto="inscription@myecl.fr">inscription@myecl.fr</a>.

				</div>

			</div>

		</div>

	</div>

	<!-- Javascript import -->

	<script src="/kingadmin/theme/assets/js/jquery/jquery-2.1.0.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script src="/kingadmin/theme/assets/js/bootstrap/bootstrap.js"></script>
	<script src="/kingadmin/theme/assets/js/plugins/modernizr/modernizr.js"></script>
	<script src="/kingadmin/theme/assets/js/plugins/bootstrap-tour/bootstrap-tour.custom.js"></script>
	<script src="/kingadmin/theme/assets/js/king-common.js"></script>
	<script src="/kingadmin/theme/assets/js/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>

	<!-- Javascript custom -->

	<script>

		(function error_msg(){

		    var wrong = parseInt((new URL(window.location.toString())).searchParams.get('wrong'));
		    var invtok = parseInt((new URL(window.location.toString())).searchParams.get('invalid_token'));
		    var interr = parseInt((new URL(window.location.toString())).searchParams.get('internal_error'));
		    var invalid = parseInt((new URL(window.location.toString())).searchParams.get('invalid'));
		    if(wrong){
		        document.getElementById("login-input").classList.add("has-error");
				document.getElementById("password-input").classList.add("has-error");
				var err = document.getElementById("error-message");
				err.innerHTML = "<span class='help-block'>Login ou mot de passe incorrect</span>";
            } else if(invtok){
				var info = document.getElementById("info-message");
				info.innerHTML = "Formulaire périmé, essayez à nouveau";
                info.style.visibility = 'visible';
                setTimeout(2000, function(){
                    info.style.visibility = "hidden";
                    info.innerHTML = "";
                });
            } else if(interr){
				var info = document.getElementById("info-message");
				info.innerHTML = "Erreur interne, essayez plus tard";
                info.style.visibility = "visible";
                setTimeout(2000, function(){
                    info.style.visibility = "hidden";
                    info.innerHTML = "";
                });
            } else if(invalid){
				var info = document.getElementById("info-message");
				info.innerHTML = "L'une des entrée n'était pas autorisé, réessayez ou contactez ECLAIR";
                info.style.visibility = "visible";
                setTimeout(2000, function(){
                    info.style.visibility = "hidden";
                    info.innerHTML = "";
                });
            }

		})()

	</script>

</body>

</html>
